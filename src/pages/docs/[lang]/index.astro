---
import { LANGS, type Lang, START_PAGE } from "../../../config/i18n";

// Generate static paths for all supported languages
export function getStaticPaths() {
  return LANGS.map((lang) => ({ params: { lang } }));
}

// Resolve and redirect to the proper language start page
const { lang } = Astro.params as { lang?: string };
const safeLang: Lang = LANGS.includes((lang as Lang) || ("" as Lang))
  ? (lang as Lang)
  : "en";
const target = START_PAGE[safeLang];
Astro.redirect(target);
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="refresh" content={`0; url=${target}`} />
    <link rel="canonical" href={target} />
    <title>Redirecting…</title>
  </head>
  <body>
    <p>Redirecting to <a href={target}>{safeLang.toUpperCase()} docs</a>…</p>
  </body>
</html>
