---
import { LANGS, DEFAULT_LANG, type Lang } from "../../config/i18n";
const BASE = import.meta.env.BASE_URL || '/';
const target = `${BASE}api/${DEFAULT_LANG}/`;
const alternates = Object.fromEntries(
  LANGS.map((l: Lang) => [l, `${BASE}api/${l}/`])
) as Record<Lang, string>;
const abs = (href: string) => (Astro.site ? new URL(href, Astro.site).toString() : href);
Astro.redirect(target);
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="refresh" content={`0; url=${target}`} />
    <link rel="canonical" href={abs(target)} />
    {Object.entries(alternates).map(([code, href]) => (
      <link rel="alternate" hreflang={code} href={abs(href)} />
    ))}
    <link rel="alternate" hreflang="x-default" href={abs(alternates[DEFAULT_LANG])} />
    <title>Redirecting…</title>
  </head>
  <body>
    <p>Redirecting to <a href={target}>API (EN)</a>…</p>
  </body>
</html>
