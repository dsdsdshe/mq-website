---
import { LANGS, type Lang } from "../../../config/i18n";

export function getStaticPaths() {
  return LANGS.map((lang) => ({ params: { lang } }));
}

const { lang } = Astro.params as { lang?: string };
const safeLang: Lang = LANGS.includes((lang as Lang) || ("" as Lang))
  ? (lang as Lang)
  : "en";

const BASE = import.meta.env.BASE_URL || '/';
const target = `${BASE}docs/api/${safeLang}/${import.meta.env.DEV ? 'index.html' : ''}`;
Astro.redirect(target);
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="refresh" content={`0; url=${target}`} />
    <link rel="canonical" href={target} />
    <title>Redirecting…</title>
  </head>
  <body>
    <p>Redirecting to <a href={target}>API ({safeLang.toUpperCase()})</a>…</p>
  </body>
</html>
